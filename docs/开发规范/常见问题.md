# 常见问题

## 路由模型绑定

```php
// 路由
Route::put('/company-operators/{company_operator}', ...);

// ✅ 正确 - 参数名使用 snake_case
public function update(Request $request, CompanyOperator $company_operator) {}

// ❌ 错误 - camelCase 可能绑定失败
public function update(Request $request, CompanyOperator $companyOperator) {}
```

## Filter 方法名冲突

```php
// ❌ input() 与父类冲突
public function input() { }

// ✅ 使用其他名称
public function inputType() { }
```

## company_id 保护

**创建时** - 显式设置（不在 fillable 中）：
```php
$model = new Model($request->validated());
$model->company_id = $data['company_id'];
$model->save();
```

**更新时** - 在 Request 中移除：
```php
protected function prepareForValidation()
{
    if ($this->has('company_id')) {
        $this->request->remove('company_id');
    }
}
```

## Autoload

添加新类后必须运行：
```bash
composer dump-autoload
```

---

## 开发检查清单

- [ ] 使用 Filter 模式（列表接口）
- [ ] 使用统一返回方法（`respondWithPagination`, `respondWithResource`）
- [ ] 使用 Resource 包裹返回数据
- [ ] 使用 FormRequest 验证
- [ ] Model 配置 Filterable trait
- [ ] company_id 等字段已保护
- [ ] 路由模型绑定参数名正确
- [ ] 运行 `composer dump-autoload`
